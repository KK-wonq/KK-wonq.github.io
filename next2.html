<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3번째 페이지 | 이혜원 (Reimagined)</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css">

</head>
<body>
  
  <div class="container">
    <header>
      <div class="profile">
        <div class="profile-avatar" aria-hidden="true">LH</div>
        <div class="profile-info">
          <h1>이혜원</h1>
          <p>보안 로그, 취약점 분석 관련 포트폴리오</p>
        </div>
      </div>
      <div class="header-actions">
        <a href="next.html" class="btn">← 이전 페이지</a>
        </div>
    </header>

    <main>
      <section id="intro">
        <h2>새 프로젝트 소개</h2>
        <p>
          이 페이지는 보안 코드 분석, CTF풀이과정, OWASP 풀이과정 등 에 대해 다룹니다.
          다양한 도구와 기술을 활용하여 실제와 유사한 환경에서 보안 문제를 해결하는 과정을 확인하실 수 있습니다.
        </p>
      </section>

      <section id="project-list">
        <h2 class="section-title">PROJECTS</h2>
        
        <div class="projects-grid">
          <div class="project-card" data-project-id="gns3" tabindex="0">
            <img src="part2-image/GNS3/topology.png" alt="gns3썸네일" class="project-card-thumbnail" loading="lazy">
            <div class="project-card-content"><p>GNS3 토폴로지 작성</p></div>
          </div>
          <div class="project-card" data-project-id="dns" tabindex="0">
            <img src="part2-image/dns,hids,nips,nms(zabbix)/nail.png" alt="dns" class="project-card-thumbnail" loading="lazy">
            <div class="project-card-content"><p>서버구축 및 NIDS</p></div>
          </div>
          <div class="project-card" data-project-id="wazuh" tabindex="0">
            <img src="part2-image/wazuh,go,pmm/nail.png" alt="wazuh" class="project-card-thumbnail" loading="lazy">
            <div class="project-card-content"><p>보안 로그 분석</p></div>
          </div>
          <div class="project-card" data-project-id="ctf" tabindex="0">
            <img src="part2-image/ctf/ctf-thumbnail.png" alt="CTF 썸네일" class="project-card-thumbnail" loading="lazy">
            <div class="project-card-content"><p>CTF 풀이 과정</p></div>
          </div>
          <div class="project-card" data-project-id="juice-shop" tabindex="0">
            <img src="part2-image/juice-shop/juice-shop-thumbnail.png" alt="Juice-shop 썸네일" class="project-card-thumbnail" loading="lazy">
            <div class="project-card-content"><p>OWASP Juice Shop</p></div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div class="modal-overlay" id="project-modal">
    <div class="modal-content">
      <div class="modal-header">
        <button class="modal-back-btn" id="modal-back" style="display: none;">← 뒤로가기</button>
        <button class="modal-close-btn" id="modal-close">✖</button>
      </div>
      <h2 id="project-detail-title"></h2>
      <p id="project-detail-description"></p>
      <div id="project-detail-content">
      </div>
    </div>
  </div>

  <div id="lightbox">
    <img id="lightbox-image" src="" alt="확대 이미지">
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', () => {

    // --- 5. 여기에 이 페이지에 맞는 새 프로젝트 데이터를 입력하세요 ---
    const portfolioData = {
      // 위에서 추가한 'data-project-id'와 일치하는 key를 사용하세요
      gns3: {
        title: "GNS3 작성",
        description: "GNS3 토폴로지 작성 후 네트워크 설정",
        images: [
          { src: "part2-image/GNS3/topology.png", caption: "전체 토폴로지" },
          { src: "part2-image/GNS3/vlan-topol.png", caption: "vlan 설정 topology" },
          { src: "part2-image/GNS3/AC-ping.png", caption: "Attacker-A -> Attacker-C ping 확인" },
          { src: "part2-image/GNS3/DC-ping.png", caption: "Attacker-D -> Attacker-C ping 확인" },
          { src: "part2-image/GNS3/asav-rule1.png", caption: "ASAv-rule 작성 1. DNS->inside ping가능" },
          { src: "part2-image/GNS3/rule2.png", caption: "rule 2. CTF->Wazuh ping 가능" },
          { src: "part2-image/GNS3/rule3.png", caption: "rule 3. R2->R1 telnet 접속 가능" },
          { src: "part2-image/GNS3/rule4.png", caption: "rule 4. R1->outside telnet 접속 가능." },
          { src: "part2-image/GNS3/rule5.png", caption: "rule 5. Flare-VM->R1 http 접속 가능" }
        ]
      },
      dns: {
        title: "서버구축 및 패킷 탐지 분석, NIDS 구축",
        description: "DNS, HIDS 등 구축",
        // [수정됨] subProjects를 하나로 합쳤습니다.
        subProjects: {
          'sub-project-a': { title: "DNS 구축 후 확인", thumbnail: "part2-image/dns,hids,nips,nms(zabbix)/dns-nail.png" },
          'sub-project-b': { title: "HIDS 구축 후 확인", thumbnail: "part2-image/dns,hids,nips,nms(zabbix)/hids-nail.png" }
        },
        // [수정됨] 쉼표(,)를 추가했습니다.
        images: [
           { src: "part2-image/dns,hids,nips,nms(zabbix)/zabbix.png", caption: "zabbix 구축 후 연결상태 체크" },
           { src: "part2-image/dns,hids,nips,nms(zabbix)/suricata.png", caption: "NIDS-Suricata 구축 후 탐지로그" },
           { src: "part2-image/dns,hids,nips,nms(zabbix)/snort.png", caption: "NIDS-Snort 구축 후 탐지로그" }
        ]
      },
      wazuh: {
        title: "보안 로그 분석",
        description: "Wazuh 등 구축",
        // [수정됨] subProjects를 하나로 합쳤습니다.
        subProjects: {
          'sub-project-c': { title: "Wazuh 구축 후 확인", thumbnail: "part2-image/wazuh,go,pmm/wazuh-nail.png" },
          'sub-project-d': { title: "WAF(Goaccess)", thumbnail: "part2-image/wazuh,go,pmm/go-nail.png" }
        },
        // [수정됨] 쉼표(,)를 추가했습니다.
        images: [
           { src: "part2-image/wazuh,go,pmm/pmm.png", caption: "PMM 구축 후 연결 확인" }
        ]
      },


      //dns 서브 프로젝트
      'sub-project-a': {
         title: "DNS 구축",
         description: "DNS 를 구축 결과물",
         images: [
           { src: "part2-image/dns,hids,nips,nms(zabbix)/dns-1.png", caption: "DNS 구축을 위한 도메인 zone 파일 작성" },
           { src: "part2-image/dns,hids,nips,nms(zabbix)/dns-2.png", caption: "도메인으로 들어간 결과" }
         ]
      },
      'sub-project-b': {
         title: "HIDS-OSSEC 구축",
         description: "HIDS-OSSEC 를 구축 결과물",
         images: [
           { src: "part2-image/dns,hids,nips,nms(zabbix)/hids-1.png", caption: "HIDS 구축 후 에이전트 등록" },
           { src: "part2-image/dns,hids,nips,nms(zabbix)/hids-2.png", caption: "에이전트 활동 로그 관찰 결과" }
         ]
      },
      'sub-project-c': {
         title: "Wazuh 구축",
         description: "Wazuh 구축 후 결과물",
         images: [
           { src: "part2-image/wazuh,go,pmm/wazuh-1.png", caption: "Wazuh 구축 후 페이지" },
           { src: "part2-image/wazuh,go,pmm/wazuh-2.png", caption: "에이전트 등록 완료" }
         ]
      },
      'sub-project-d': {
         title: "Goaccess 구축",
         description: "Goaccess 구축 후 결과물",
         images: [
           { src: "part2-image/wazuh,go,pmm/go-1.png", caption: "터미널로 Goaccess 접속" },
           { src: "part2-image/wazuh,go,pmm/go-2.png", caption: "html파일로 apache2 로그 확인" }
         ]
      },
      
      ctf: {
        title: "CTF 풀이 과정 (문제이름)",
        description: "Webhacking.kr 또는 특정 CTF 문제 풀이 과정입니다.",
        // [중요] 'images' 대신 'htmlContent'를 사용합니다.
        // 여기에 H3, p, img 태그를 자유롭게 넣어 블로그처럼 만듭니다.
        htmlContent: ` 
          <h3>1. 문제 분석</h3>
          <p>문제 페이지에 접속하면 다음과 같은 화면이 나옵니다. 소스 코드를 분석해 보니...</p>
          <img src="part2-image/ctf/ctf-step1.png" alt="문제 분석 스크린샷">
          
          <h3>2. 취약점 발견</h3>
          <p>특정 입력값에서 SQL 인젝션 취약점이 발견되었습니다. ' OR '1'='1'-- 구문을 입력했을 때...</p>
          <img src="part2-image/ctf/ctf-step2.png" alt="취약점 발견 스크린샷">

          <h3>3. 플래그 획득</h3>
          <p>최종적으로 페이로드를 완성하여 플래그를 획득했습니다.</p>
          <pre><code>alert('pwned')</code></pre>
        `
      },

      // 2. Juice-shop (하위 프로젝트 컨테이너)
      'juice-shop': {
        title: "OWASP Juice Shop 풀이",
        description: "난이도별 Juice Shop 문제 풀이 과정입니다. 카드를 클릭하세요.",
        // 'dns' 프로젝트처럼 subProjects를 가집니다.
        subProjects: {
          'sub-juice-xss': { title: "XSS (Cross-Site Scripting)", thumbnail: "part2-image/juice-shop/xss-thumb.png" },
          'sub-juice-sqli': { title: "SQL Injection", thumbnail: "part2-image/juice-shop/sqli-thumb.png" }
          // ... 여기에 다른 Juice-shop 챌린지를 추가 ...
        }
      },

      // 3. Juice-shop 하위 프로젝트 (이것도 블로그 형식)
      'sub-juice-xss': {
        title: "XSS (Cross-Site Scripting) 챌린지",
        description: "XSS 관련 챌린지 풀이 상세 과정입니다.",
        // 여기도 'htmlContent'를 사용합니다.
        htmlContent: `
          <h3>Level 1: Basic XSS</h3>
          <p>가장 기본적인 XSS 챌린지입니다. 검색 창에 스크립트 구문을 입력합니다.</p>
          <pre><code>&lt;script&gt;alert('xss')&lt;/script&gt;</code></pre>
          <img src="part2-image/juice-shop/xss-step1.png" alt="XSS 1단계">
        `
      },
      'sub-juice-sqli': {
        title: "SQL Injection 챌린지",
        description: "SQLi 관련 챌린지 풀이 상세 과정입니다.",
        htmlContent: `
          <h3>Level 1: Login Admin</h3>
          <p>로그인 창에서 ' OR '1'='1' 구문을 사용하여 관리자로 로그인합니다.</p>
          <img src="part2-image/juice-shop/sqli-step1.png" alt="SQLi 1단계">
        `
      }
    };
    
    // --- 이하 자바스크립트 로직은 수정할 필요가 없습니다 ---
    
    const modal = document.getElementById('project-modal');
    const modalCloseBtn = document.getElementById('modal-close');
    const modalBackBtn = document.getElementById('modal-back');
    const modalTitle = document.getElementById('project-detail-title');
    const modalDescription = document.getElementById('project-detail-description');
    const modalContent = document.getElementById('project-detail-content');
    
    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightbox-image');

    const navigationStack = [];

    function renderModalContent(projectId) {
      const project = portfolioData[projectId];
      if (!project) return;

      if (navigationStack[navigationStack.length - 1] !== projectId) {
          navigationStack.push(projectId);
      }
      
      modalTitle.textContent = project.title;
      modalDescription.textContent = project.description;
      modalContent.innerHTML = ''; // 내용을 비웁니다.

      // [추가] 'htmlContent' (블로그 형식)이 있는지 확인합니다.
      if (project.htmlContent) {
        // "블로그" 경로
        const blogContainer = document.createElement('div');
        blogContainer.className = 'blog-content'; // CSS 스타일을 위한 클래스
        blogContainer.innerHTML = project.htmlContent;
        modalContent.appendChild(blogContainer);

        // [추가] 블로그 내용 안의 이미지에도 라이트박스를 적용합니다.
        blogContainer.querySelectorAll('img').forEach(img => {
          img.addEventListener('click', () => openLightbox(img.src));
          // img.style.cursor = 'pointer'; // 클릭 가능하게 보이도록 (선택 사항)
        });

      } else if (project.images || project.subProjects) {
        // "기존 그리드" 경로
        const grid = document.createElement('div');
        grid.className = 'detail-grid';

        if (project.images) {
            project.images.forEach(image => {
                const item = document.createElement('div');
                item.className = 'detail-item';
                item.innerHTML = `<img src="${image.src}" alt="${image.caption}" loading="lazy"><p>${image.caption}</p>`;
                item.addEventListener('click', () => openLightbox(image.src));
                grid.appendChild(item);
            });
        } 
        
        if (project.subProjects) {
            for (const key in project.subProjects) {
                const sub = project.subProjects[key];
                const card = document.createElement('div');
                card.className = 'project-card';
                card.innerHTML = `<img src="${sub.thumbnail}" alt="${sub.title}" class="project-card-thumbnail"><div class="project-card-content"><p>${sub.title}</p></div>`;
                card.addEventListener('click', () => renderModalContent(key));
                grid.appendChild(card);
            }
        }
        
        modalContent.appendChild(grid);
      }
      
      modalBackBtn.style.display = navigationStack.length > 1 ? 'block' : 'none';
    }

    function openModal(projectId) {
      navigationStack.length = 0; 
      renderModalContent(projectId);
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }

    function goBack() {
        navigationStack.pop(); 
        if (navigationStack.length > 0) {
            const prevProjectId = navigationStack[navigationStack.length - 1]; 
            renderModalContent(prevProjectId);
        }
    }

    function openLightbox(src) {
      lightboxImage.src = src;
      lightbox.classList.add('active');
    }

    function closeLightbox() {
      lightbox.classList.remove('active');
    }

    // --- Event Listeners ---
    document.querySelectorAll('.project-card').forEach(card => {
      card.addEventListener('click', () => openModal(card.dataset.projectId));
    });

    modalCloseBtn.addEventListener('click', closeModal);
    modalBackBtn.addEventListener('click', goBack);
    modal.addEventListener('click', e => e.target === modal && closeModal());
    lightbox.addEventListener('click', closeLightbox);
    
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        if (lightbox.classList.contains('active')) closeLightbox();
        else if (modal.classList.contains('active')) closeModal();
      }
    });
  });
  </script>
</body>
</html>
