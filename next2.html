<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3번째 페이지 | 이혜원 (Reimagined)</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css">

</head>
<body>
  
  <div class="container">
    <header>
      <div class="profile">
        <div class="profile-avatar" aria-hidden="true">LH</div>
        <div class="profile-info">
          <h1>이혜원</h1>
          <p>보안 로그, 취약점 분석 관련 포트폴리오</p>
        </div>
      </div>
      <div class="header-actions">
        <a href="next.html" class="btn">← 이전 페이지</a>
        </div>
    </header>

    <main>
      <section id="intro">
        <h2>새 프로젝트 소개</h2>
        <p>
          이 페이지는 보안 코드 분석, CTF풀이과정, OWASP 풀이과정 등 에 대해 다룹니다.
          다양한 도구와 기술을 활용하여 실제와 유사한 환경에서 보안 문제를 해결하는 과정을 확인하실 수 있습니다.
        </p>
      </section>

      <section id="project-list">
        <h2 class="section-title">PROJECTS</h2>
        
        <div class="projects-grid">
          <div class="project-card" data-project-id="gns3" tabindex="0">
            <img src="part2-image/GNS3/topology.png" alt="gns3썸네일" class="project-card-thumbnail" loading="lazy">
            <div class="project-card-content"><p>GNS3 토폴로지 작성</p></div>
          </div>
          <div class="project-card" data-project-id="dns" tabindex="0">
            <img src="part2-image/dns,hids,nips,nms(zabbix)/" alt="dns" class="project-card-thumbnail" loading="lazy">
            <div class="project-card-content"><p>GNS3 토폴로지 작성</p></div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div class="modal-overlay" id="project-modal">
    <div class="modal-content">
      <div class="modal-header">
        <button class="modal-back-btn" id="modal-back" style="display: none;">← 뒤로가기</button>
        <button class="modal-close-btn" id="modal-close">✖</button>
      </div>
      <h2 id="project-detail-title"></h2>
      <p id="project-detail-description"></p>
      <div id="project-detail-content">
      </div>
    </div>
  </div>

  <div id="lightbox">
    <img id="lightbox-image" src="" alt="확대 이미지">
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', () => {

    // --- 5. 여기에 이 페이지에 맞는 새 프로젝트 데이터를 입력하세요 ---
    const portfolioData = {
      // 위에서 추가한 'data-project-id'와 일치하는 key를 사용하세요
      gns3: {
        title: "GNS3 작성",
        description: "GNS3 토폴로지 작성 후 네트워크 설정",
        images: [
          { src: "part2-image/GNS3/topology.png", caption: "전체 토폴로지" }
          { src: "part2-image/GNS3/vlan-topol.png", caption: "vlan 설정 topology" },
          { src: "part2-image/GNS3/AC-ping.png", caption: "Attacker-A -> Attacker-C ping 확인" }
          { src: "part2-image/GNS3/DC-ping.png", caption: "Attacker-D -> Attacker-C ping 확인" }
          { src: "part2-image/GNS3/asav-rule1.png", caption: "ASAv-rule 작성 1. DNS->inside ping가능" }
          { src: "part2-image/GNS3/rule2.png", caption: "rule 2. CTF->Wazuh ping 가능" }
          { src: "part2-image/GNS3/rule3.png", caption: "rule 3. R2->R1 telnet 접속 가능" }
          { src: "part2-image/GNS3/rule4.png", caption: "rule 4. R1->outside telnet 접속 가능." }
          { src: "part2-image/GNS3/rule5.png", caption: "rule 5. Flare-VM->R1 http 접속 가능" }
        ]
      },
      'new-project-2': {
        title: "새 프로젝트 2 (하위 프로젝트 포함)",
        description: "새 프로젝트 2는 하위 프로젝트를 가집니다.",
        subProjects: {
          'sub-project-a': { title: "하위 프로젝트 A", thumbnail: "images/sub-a.jpg" }
        }
      },
      'sub-project-a': {
         title: "하위 프로젝트 A 상세",
         description: "이것은 하위 프로젝트 A의 내용입니다.",
         images: [
           { src: "images/sub-a-detail.jpg", caption: "하위 프로젝트 상세 이미지" }
         ]
      }
    };
    
    // --- 이하 자바스크립트 로직은 수정할 필요가 없습니다 ---
    
    const modal = document.getElementById('project-modal');
    const modalCloseBtn = document.getElementById('modal-close');
    const modalBackBtn = document.getElementById('modal-back');
    const modalTitle = document.getElementById('project-detail-title');
    const modalDescription = document.getElementById('project-detail-description');
    const modalContent = document.getElementById('project-detail-content');
    
    const lightbox = document.getElementById('lightbox');
    const lightboxImage = document.getElementById('lightbox-image');

    const navigationStack = [];

    function renderModalContent(projectId) {
      const project = portfolioData[projectId];
      if (!project) return;

      if (navigationStack[navigationStack.length - 1] !== projectId) {
          navigationStack.push(projectId);
      }
      
      modalTitle.textContent = project.title;
      modalDescription.textContent = project.description;
      modalContent.innerHTML = '';

      const grid = document.createElement('div');
      grid.className = 'detail-grid';

      if (project.images) {
          project.images.forEach(image => {
              const item = document.createElement('div');
              item.className = 'detail-item';
              item.innerHTML = `<img src="${image.src}" alt="${image.caption}" loading="lazy"><p>${image.caption}</p>`;
              item.addEventListener('click', () => openLightbox(image.src));
              grid.appendChild(item);
          });
      } 
      
      if (project.subProjects) {
          for (const key in project.subProjects) {
              const sub = project.subProjects[key];
              const card = document.createElement('div');
              card.className = 'project-card';
              card.innerHTML = `<img src="${sub.thumbnail}" alt="${sub.title}" class="project-card-thumbnail"><div class="project-card-content"><p>${sub.title}</p></div>`;
              card.addEventListener('click', () => renderModalContent(key));
              grid.appendChild(card);
          }
      }
      
      modalContent.appendChild(grid);
      modalBackBtn.style.display = navigationStack.length > 1 ? 'block' : 'none';
    }

    function openModal(projectId) {
      navigationStack.length = 0; 
      renderModalContent(projectId);
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }

    function goBack() {
        navigationStack.pop(); 
        if (navigationStack.length > 0) {
            const prevProjectId = navigationStack[navigationStack.length - 1]; 
            renderModalContent(prevProjectId);
        }
    }

    function openLightbox(src) {
      lightboxImage.src = src;
      lightbox.classList.add('active');
    }

    function closeLightbox() {
      lightbox.classList.remove('active');
    }

    // --- Event Listeners ---
    document.querySelectorAll('.project-card').forEach(card => {
      card.addEventListener('click', () => openModal(card.dataset.projectId));
    });

    modalCloseBtn.addEventListener('click', closeModal);
    modalBackBtn.addEventListener('click', goBack);
    modal.addEventListener('click', e => e.target === modal && closeModal());
    lightbox.addEventListener('click', closeLightbox);
    
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        if (lightbox.classList.contains('active')) closeLightbox();
        else if (modal.classList.contains('active')) closeModal();
      }
    });
  });
  </script>
</body>
</html>
